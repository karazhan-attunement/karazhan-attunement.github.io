<!DOCTYPE html>
<html>
<meta charset="UTF-8">

<head>
    <link rel="stylesheet" href="style.css">

    <title>Karazhan Attunement Guide</title>
</head>

<body>
    <div class="main">
        <h1><em>Karazhan</em> Attunement Guide</h1>

        <div class="unfinished-step" id="0">
            <h2><img src="img/quest.png" class="quest-large" /> Disturbances</h2>
            <p>The quest chain starts with two quests, namely <img src="img/quest.png" class="quest-small" /><a
                    href="https://tbc.wowhead.com/quest=9824/arcane-disturbances">Arcane Disturbances</a> and <img
                    src="img/quest.png" class="quest-small" /><a
                    href="https://tbc.wowhead.com/quest=9825/restless-activity">Restless Activity</a>.
                The quest giver is <a href="https://tbc.wowhead.com/npc=17613/archmage-alturus">Archmage Alturus</a>,
                located outside of the Tower of Karazhan.
                These two quests can be done in parallel.
            </p>
            <p>
                For Arcane Disturbances, you will receive a <a
                    href="https://tbc.wowhead.com/item=24474/violet-scrying-crystal">Violet Scrying Crystal</a> and need
                to take a reading from two water sources.

                Both water sources are located in the Master's Cellar. Use both of the two entrances, one for each
                reading.
            <ul>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label>Underground Well Reading</label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label>Underground Pond Reading</label>
                </li>
            </ul>
            </p>
            <p>
                Return to <a href="https://tbc.wowhead.com/npc=17613/archmage-alturus">Archmage Alturus</a> upon
                completion.
                Remember to also complete the following quest alongside this one.
            </p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="1">
            <h2><img src="img/quest.png" class="quest-large" /> Restless Activity</h2>
            <p>
                This is the second quest given by <a href="https://tbc.wowhead.com/npc=17613/archmage-alturus">Archmage
                    Alturus</a>.
                The quest item, <a href="https://tbc.wowhead.com/item=24480/ghostly-essence">Ghostly Essence</a> drops
                from all mobs inside the Master's Cellar, with a roughly 80% chance.
            </p>
            <p>
            <ul>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label>10/10 <a href="https://tbc.wowhead.com/item=24480/ghostly-essence">Ghostly
                            Essence</a></label>
                </li>
            </ul>
            </p>

            <button type="button" class="done-button">Done</button>
            <div class="check"></div>
        </div>

        <div class="unfinished-step" id="2">
            <h2><img src="img/quest.png" class="quest-large" /> Contact from Dalaran</h2>
            <p>Bring Alturus's Report to <a href="https://tbc.wowhead.com/npc=18165/archmage-cedric">Archmage Cedric</a>
                in the outskirts of Dalaran.</p>
            <p>This is a simple messenger quest, go to Dalaran in Alterac Mountains.</p>
            <p>
                <img src="img/dalaran.png" />
            </p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="3">
            <h2><img src="img/quest.png" class="quest-large" /> Khadgar</h2>
            <p>Deliver Alturus's Report to <a href="https://tbc.wowhead.com/npc=18166/khadgar">Khadgar</a> in Shattrath
                City in Terokkar Forest. </p>
            <p>This is a simple messenger quest, go to <a href="https://tbc.wowhead.com/npc=18166/khadgar">Khadgar</a>
                in Shattrath City.</p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="4">
            <h2>Get the key to Shadow Labyrinth</h2>
            <p>
                You need to get the <a href="https://tbc.wowhead.com/item=27991/shadow-labyrinth-key">Shadow Labyrinth
                    Key</a>.
            </p>
            <p>
                This key can be obtained in <a href="https://tbc.wowhead.com/sethekk-halls">Sethekk Halls</a> after
                killing the last boss <a href="https://tbc.wowhead.com/npc=18473/talon-king-ikiss">Talon King Ikiss</a>
                in a chest which spawns behind him.
            </p>
            <p>
                Here's a visual guide to Auchindoun's entrances.
            </p>
            <p>
                <img src="img/auchindoun.png" class="image-center" />
            </p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="5">
            <h2><img src="img/quest.png" class="quest-large" /> Entry Into Karazhan</h2>
            <p>Khadgar wants you to enter the Shadow Labyrinth at Auchindoun and retrieve the First Key Fragment from an
                Arcane Container hidden there. </p>
            <p>
                The Arcane Container is a glowing orb like object, to the left of <a
                    href="https://tbc.wowhead.com/npc=18708/murmur">Murmur</a> in Shadow Labyrinth.
                Upon interacting with the object, a <a
                    href="https://tbc.wowhead.com/npc=22890/first-fragment-guardian">Fragment Guardian</a> will spawn,
                an elite
                cloud-elemental, who will drop the <a href="https://tbc.wowhead.com/item=24514/first-key-fragment">First
                    Key Fragment</a>.
            </p>

            <p>
            <ul>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label><a href="https://tbc.wowhead.com/item=24514/first-key-fragment">First Key Fragment</a>
                    </label>
                </li>
            </ul>
            </p>

            <p>
                Note that it is enough for one person to spawn the Fragment Guardian, everybody will get the quest item.
            </p>
            <p>Return to <a href="https://tbc.wowhead.com/npc=18166/khadgar">Khadgar</a>.</p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="6">
            <h2>Get the key to The Arcatraz</h2>
            <p>
                <b>You need a flying mount to complete this step.</b>
            </p>
            <p>
                Complete the quest chain started by either <a
                    href="https://tbc.wowhead.com/npc=19467/anchorite-karja">Anchorite Karja (The Aldor)</a> or <a
                    href="https://tbc.wowhead.com/npc=19468/spymaster-thalodien">Spymaster Thalodien (The Scryers)</a>,
                depending on which faction in Shattrath City you
                sided with. The first quest is <img src="img/quest.png" class="quest-small" /><em>Assisting the
                    Consortium</em>.
            </p>
            <p>The last quest in the quest chain is <img src="img/quest.png" class="quest-small" /><a
                    href="https://www.wowhead.com/quest=10704/how-to-break-into-the-arcatraz">How to Break Into the
                    Arcatraz</a> and requires you to go into both <a href="https://www.wowhead.com/the-mechanar">The
                    Mechanar</a> and <a href="https://www.wowhead.com/the-botanica">The Botanica</a>.
            </p>

            <p>
            <ul>
                <li>
                    <input type="checkbox" class="subtask-checkbox"><label>Have a flying mount</label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label><img src="img/quest.png" class="quest-small" /><em>Assisting the Consortium</em> quest chain
                        started</label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label><img src="img/quest.png" class="quest-small" /><a
                            href="https://www.wowhead.com/quest=10704/how-to-break-into-the-arcatraz">How to Break
                            Into the Arcatraz</a> quest started</label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label>Cleared <a href="https://www.wowhead.com/the-mechanar">The Mechanar</a></label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label>Cleared <a href="https://www.wowhead.com/the-botanica">The Botanica</a></label>
                </li>
            </ul>
            </p>

            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="7">
            <h2><img src="img/quest.png" class="quest-large" /> The Second and Third Fragments</h2>
            <p>
                Obtain the Second Key Fragment from an Arcane Container inside Coilfang Reservoir and the Third Key
                Fragment from an Arcane Container inside Tempest Keep. Return to Khadgar in Shattrath City after you've
                completed this task.
            </p>

            <p>
                For this quest, you will have to repeat a similar process as the previous step, only this time, in <a
                    href="https://tbc.wowhead.com/the-steamvault">The Steamvault</a> and <a
                    href="https://tbc.wowhead.com/the-arcatraz">The Alcatraz</a>.
            </p>
            <p>
            <ul>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label><a href="https://www.wowhead.com/item=24487/second-key-fragment">Second Key Fragment</a>
                    </label>
                </li>
                <li>
                    <input type="checkbox" class="subtask-checkbox">
                    <label><a href="https://www.wowhead.com/item=24488/third-key-fragment">Third Key
                            Fragment</a></label>
                </li>
            </ul>
            </p>

            <p>
                The <a href="https://www.wowhead.com/item=24487/second-key-fragment">Second Key Fragment</a>'s container
                is located <b>underneath the water</b> near <a
                    href="https://tbc.wowhead.com/npc=17797/hydromancer-thespia">Hydromancer Thespia</a>, who is the
                first boss of <a href="https://tbc.wowhead.com/the-steamvault">The Steamvault</a>.
            </p>

            <p>
                The <a href="https://www.wowhead.com/item=24488/third-key-fragment">Third Key Fragment</a> is located in
                a room near <a href="https://tbc.wowhead.com/npc=20870/zereketh-the-unbound">Zereketh the Unbound</a>.
                who is the first boss of <a href="https://tbc.wowhead.com/the-arcatraz">The Alcatraz</a>.
            </p>
            <p>
                Note that it is enough for one person to spawn the Fragment Guardian, everybody will get the quest item.
            </p>
            <p>Return to <a href="https://tbc.wowhead.com/npc=18166/khadgar">Khadgar</a>.</p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="8">
            <h2>Get attuned to The Black Morass</h2>
            <p>
                Complete the dungeon <a href="https://www.wowhead.com/old-hillsbrad-foothills">Old Hillsbrad
                    Foothills</a> in Caverns of Time.
            </p>
            <p>
                By finishing the quests inside this dungeon you will be attuned to <a
                    href="https://tbc.wowhead.com/zone=2366/the-black-morass">The Black Morass</a>.
                The first quest is called <img src="img/quest.png" class="quest-small" /><a
                    href="https://tbc.wowhead.com/quest=10279/to-the-masters-lair">To the Master's Lair</a>, which leads
                into <img src="img/quest.png" class="quest-small" /><a
                    href="https://tbc.wowhead.com/quest=10282/old-hillsbrad">Old Hillsbrad</a>.
            </p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="9">
            <h2><img src="img/quest.png" class="quest-large" /> The Master's Touch</h2>
            <p>Go into the Caverns of Time and convince Medivh to enable your Restored Apprentice's Key.</p>
            <p>
                From the previous quest, you will receive a <a
                    href="https://tbc.wowhead.com/item=24489/restored-apprentices-key">Restored Apprentice's Key</a>.
                Take this key into <a href="https://tbc.wowhead.com/zone=2366/the-black-morass">The Black Morass</a> and
                talk to <a href="https://tbc.wowhead.com/npc=15608/medivh">Medivh</a> to complete the quest.
            </p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="10">
            <h2><img src="img/quest.png" class="quest-large" /> Return to Khadgar</h2>
            <p>Return to Khadgar in Shattrath City and show him the Master's Key. </p>
            <p>This is a simple messenger quest, go to <a href="https://tbc.wowhead.com/npc=18166/khadgar">Khadgar</a>
                in Shattrath City.</p>
            <button type="button" class="done-button">Done</button>
        </div>

        <div class="unfinished-step" id="11">
            <h2><img src="img/quest.png" class="quest-large" /> The Violet Eye</h2>
            <p>Speak to <a href="https://tbc.wowhead.com/npc=17613/archmage-alturus">Archmage Alturus</a> outside
                Karazhan.</p>
            <p>This is a simple messenger quest and also the final quest of the attunement. Go back to the gates of
                Karazhan and <b>you are done</b>.</p>
            <button type="button" class="done-button">Done</button>
        </div>
    </div>

    <script src="script.js"></script>

    <script type="text/javascript">
        // check if current item is set
        var currentItem = localStorage.getItem("current-item");
        if (currentItem == null) {
            localStorage.setItem("current-item", "0");
            currentItem = 0;
        }

        // bind the buttons
        var allButtons = document.querySelectorAll('.done-button');
        for (var i = 0; i < allButtons.length; i++) {
            allButtons[i].addEventListener('click', markAsDone);
        }

        // bind the checkboxes
        var allCheckboxes = document.querySelectorAll('.subtask-checkbox');
        for (var i = 0; i < allCheckboxes.length; i++) {
            allCheckboxes[i].addEventListener('change', checkboxChanged);
        }

        styleAll();

        // load the checkboxes
        const stepsNumber = allButtons.length;
        for (var i = 0; i < stepsNumber; i++) {
            var checkboxes = document.getElementById(i).querySelectorAll('.subtask-checkbox');
            var checkboxStates = localStorage.getItem("step-" + i + "-checkboxes");
            if (checkboxStates == null) {
                continue;
            }
            checkboxStates = checkboxStates.split(',');

            if (checkboxStates.length != checkboxes.length) {
                console.error("The numer of checkboxes and saved states differs.");
                continue;
            }

            for (var c = 0; c < checkboxStates.length; c++) {
                checkboxes[c].checked = (checkboxStates[c] == 'true');
            }
        }

        // scroll to the currently unfinished
        document.getElementById(currentItem).scrollIntoView({ behavior: 'smooth', block: 'center' });
    </script>
</body>

</html>